<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevAcademy - Login</title>
  <link rel="stylesheet" href="login.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="icon" type="image/x-icon" href="/images/logo.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <style>
    * {
      font-family: 'Outfit', sans-serif;
    }
  </style>
</head>

<body>
  <header class="main-header">
    <div class="header-container">
      <nav class="navbar">
        <!-- Logo -->
        <a href="/" class="brand-logo" aria-label="DevAcademy Home">
          <img src="/images/logo2-removebg-preview.png" alt="DevAcademy Logo">
        </a>

        <!-- Desktop Navigation -->
        <ul class="nav-links-desktop">
          <li><a href="/" class="nav-link">Home</a></li>
          <li><a href="/course" class="nav-link">Courses</a></li>
          <li><a href="/quiz" class="nav-link">Quiz</a></li>
        </ul>

        <!-- Auth Buttons & Cart -->
        <div class="header-actions">
          <!-- Cart Link -->
          <a href="/payment/checkout" class="cart-link" title="Checkout">
            <span class="material-symbols-outlined">shopping_cart</span>
            <span class="cart-badge" id="cartBadgeNav" style="display: none;">0</span>
          </a>

          <a href="/login" class="action-btn login-btn">Login</a>
          <a href="/signup" class="action-btn signup-btn">Get Started</a>

          <!-- Mobile Menu Trigger -->
          <button class="mobile-menu-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
            aria-controls="offcanvasRight" aria-label="Open menu">
            <svg class="hamburger-icon" viewBox="0 0 24 24" width="32" height="32">
              <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </nav>
    </div>

    <!-- Mobile Menu Offcanvas -->
    <div class="offcanvas offcanvas-end custom-offcanvas" tabindex="-1" id="offcanvasRight"
      aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">Menu</h5>
        <button type="button" class="btn-close-custom" data-bs-dismiss="offcanvas" aria-label="Close">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="offcanvas-body">
        <div class="mobile-nav-links">
          <a href="/" class="mobile-link">
            <span class="material-symbols-outlined">home</span> Home
          </a>
          <a href="/course" class="mobile-link">
            <span class="material-symbols-outlined">school</span> Courses
          </a>
          <a href="/quiz" class="mobile-link">
            <span class="material-symbols-outlined">quiz</span> Quiz
          </a>
          <a href="/payment/checkout" class="mobile-link">
            <span class="material-symbols-outlined">shopping_cart</span> Cart
            <span class="badge bg-danger ms-2" id="cartBadgeMobile" style="font-size: 0.8em; display: none;">0</span>
          </a>
        </div>

        <div class="mobile-auth-actions">
          <a href="/login" class="mobile-btn login">Login</a>
          <a href="/signup" class="mobile-btn signup">Sign Up Free</a>
        </div>
      </div>
    </div>
  </header>

  <section class="first-section">

    <div class="card">
      <div class="head">
        <h1>Login</h1>
        <p>Welcome back</p>
        <hr>
      </div>
      <form id="loginForm">

        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">Email address</label>
          <input type="email" class="form-control" id="email" placeholder="name@example.com" required>
        </div>
        <label for="inputPassword5" class="form-label">Password</label>
        <input type="password" id="password" class="form-control" aria-describedby="passwordHelpBlock" required>
        <div id="message" style="color: red;"></div>
        <button type="submit" style="margin-top: 40px;" class="btn btn-primary">Login</button>
        <div style="width: 100%; text-align: center;
      margin-top: 20px;">
          <p>Don't have an account? <a href="/signup"> Register now</a></p>
        </div>
      </form>
    </div>
  </section>
  <section class="copyright">
    <p>All rights reserved Â© 2025 DevAcademy</p>
  </section>
  <script>
    const form = document.getElementById('loginForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const messageDiv = document.getElementById('message');

      messageDiv.textContent = '';

      try {
        const response = await fetch('/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            email,
            password,
          }),
          credentials: 'include'
        });
        const result = await response.json();

        if (result.success) {
          if (result.type === 'client') {
            window.location.href = '/dashboard';
          } else if (result.type === 'admin') {
            window.location.href = '/admin';
          }
        } else {
          messageDiv.textContent = result.message;
        }
      } catch (error) {
        messageDiv.textContent = 'Something went wrong. Please try again.';
      }

    });

  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>


</body>

</html>